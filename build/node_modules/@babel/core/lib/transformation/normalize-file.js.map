{"version":3,"sources":["../../../../../../backend/node_modules/@babel/core/lib/transformation/normalize-file.js"],"names":["Object","defineProperty","exports","value","default","normalizeFile","_path","data","_interopRequireDefault","require","_debug","_cloneDeep","t","_interopRequireWildcard","_convertSourceMap","_parser","_codeFrame","_file","_missingPluginHelper","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","debug","pluginPasses","options","code","ast","type","file","Error","parser","inputMap","inputSourceMap","fromObject","lastComment","extractComments","INLINE_SOURCEMAP_REGEX","fromComment","err","EXTERNAL_SOURCEMAP_REGEX","filename","fromMapFileComment","dirname","parserOpts","highlightCode","results","plugins","plugin","parserOverride","parse","undefined","push","length","then","message","loc","missingPlugin","codeFrame","codeFrameColumns","start","line","column","extractCommentsFromList","regex","comments","filter","test","traverseFast","node","leadingComments","innerComments","trailingComments"],"mappings":"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","file":"normalize-file.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = normalizeFile;\n\nfunction _path() {\n  const data = _interopRequireDefault(require(\"path\"));\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _debug() {\n  const data = _interopRequireDefault(require(\"debug\"));\n\n  _debug = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _cloneDeep() {\n  const data = _interopRequireDefault(require(\"lodash/cloneDeep\"));\n\n  _cloneDeep = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction t() {\n  const data = _interopRequireWildcard(require(\"@babel/types\"));\n\n  t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _convertSourceMap() {\n  const data = _interopRequireDefault(require(\"convert-source-map\"));\n\n  _convertSourceMap = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _parser() {\n  const data = require(\"@babel/parser\");\n\n  _parser = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _codeFrame() {\n  const data = require(\"@babel/code-frame\");\n\n  _codeFrame = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _file = _interopRequireDefault(require(\"./file/file\"));\n\nvar _missingPluginHelper = _interopRequireDefault(require(\"./util/missing-plugin-helper\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; if (obj != null) { var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst debug = (0, _debug().default)(\"babel:transform:file\");\n\nfunction normalizeFile(pluginPasses, options, code, ast) {\n  code = `${code || \"\"}`;\n\n  if (ast) {\n    if (ast.type === \"Program\") {\n      ast = t().file(ast, [], []);\n    } else if (ast.type !== \"File\") {\n      throw new Error(\"AST root must be a Program or File node\");\n    }\n\n    ast = (0, _cloneDeep().default)(ast);\n  } else {\n    ast = parser(pluginPasses, options, code);\n  }\n\n  let inputMap = null;\n\n  if (options.inputSourceMap !== false) {\n    if (typeof options.inputSourceMap === \"object\") {\n      inputMap = _convertSourceMap().default.fromObject(options.inputSourceMap);\n    }\n\n    if (!inputMap) {\n      const lastComment = extractComments(INLINE_SOURCEMAP_REGEX, ast);\n\n      if (lastComment) {\n        try {\n          inputMap = _convertSourceMap().default.fromComment(lastComment);\n        } catch (err) {\n          debug(\"discarding unknown inline input sourcemap\", err);\n        }\n      }\n    }\n\n    if (!inputMap) {\n      const lastComment = extractComments(EXTERNAL_SOURCEMAP_REGEX, ast);\n\n      if (typeof options.filename === \"string\" && lastComment) {\n        try {\n          inputMap = _convertSourceMap().default.fromMapFileComment(lastComment, _path().default.dirname(options.filename));\n        } catch (err) {\n          debug(\"discarding unknown file input sourcemap\", err);\n        }\n      } else if (lastComment) {\n        debug(\"discarding un-loadable file input sourcemap\");\n      }\n    }\n  }\n\n  return new _file.default(options, {\n    code,\n    ast,\n    inputMap\n  });\n}\n\nfunction parser(pluginPasses, {\n  parserOpts,\n  highlightCode = true,\n  filename = \"unknown\"\n}, code) {\n  try {\n    const results = [];\n\n    for (const plugins of pluginPasses) {\n      for (const plugin of plugins) {\n        const {\n          parserOverride\n        } = plugin;\n\n        if (parserOverride) {\n          const ast = parserOverride(code, parserOpts, _parser().parse);\n          if (ast !== undefined) results.push(ast);\n        }\n      }\n    }\n\n    if (results.length === 0) {\n      return (0, _parser().parse)(code, parserOpts);\n    } else if (results.length === 1) {\n      if (typeof results[0].then === \"function\") {\n        throw new Error(`You appear to be using an async parser plugin, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, you may need to upgrade ` + `your @babel/core version.`);\n      }\n\n      return results[0];\n    }\n\n    throw new Error(\"More than one plugin attempted to override parsing.\");\n  } catch (err) {\n    if (err.code === \"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED\") {\n      err.message += \"\\nConsider renaming the file to '.mjs', or setting sourceType:module \" + \"or sourceType:unambiguous in your Babel config for this file.\";\n    }\n\n    const {\n      loc,\n      missingPlugin\n    } = err;\n\n    if (loc) {\n      const codeFrame = (0, _codeFrame().codeFrameColumns)(code, {\n        start: {\n          line: loc.line,\n          column: loc.column + 1\n        }\n      }, {\n        highlightCode\n      });\n\n      if (missingPlugin) {\n        err.message = `${filename}: ` + (0, _missingPluginHelper.default)(missingPlugin[0], loc, codeFrame);\n      } else {\n        err.message = `${filename}: ${err.message}\\n\\n` + codeFrame;\n      }\n\n      err.code = \"BABEL_PARSE_ERROR\";\n    }\n\n    throw err;\n  }\n}\n\nconst INLINE_SOURCEMAP_REGEX = /^[@#]\\s+sourceMappingURL=data:(?:application|text)\\/json;(?:charset[:=]\\S+?;)?base64,(?:.*)$/;\nconst EXTERNAL_SOURCEMAP_REGEX = /^[@#][ \\t]+sourceMappingURL=([^\\s'\"`]+?)[ \\t]*$/;\n\nfunction extractCommentsFromList(regex, comments, lastComment) {\n  if (comments) {\n    comments = comments.filter(({\n      value\n    }) => {\n      if (regex.test(value)) {\n        lastComment = value;\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  return [comments, lastComment];\n}\n\nfunction extractComments(regex, ast) {\n  let lastComment = null;\n  t().traverseFast(ast, node => {\n    [node.leadingComments, lastComment] = extractCommentsFromList(regex, node.leadingComments, lastComment);\n    [node.innerComments, lastComment] = extractCommentsFromList(regex, node.innerComments, lastComment);\n    [node.trailingComments, lastComment] = extractCommentsFromList(regex, node.trailingComments, lastComment);\n  });\n  return lastComment;\n}"]}